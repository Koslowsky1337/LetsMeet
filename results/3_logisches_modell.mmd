erDiagram

    USER {
        bigint user_id PK
        varchar email
        varchar passwort_hash
        varchar vorname
        varchar nachname
        date geburtsdatum
        varchar geschlecht
        varchar interessiert_an
        varchar strasse
        varchar plz
        varchar ort
        varchar telefon
        timestamp erstellt_am
        timestamp aktualisiert_am
    }

    HOBBY {
        bigint hobby_id PK
        varchar hobby_name
    }

    USER_HOBBY {
        bigint user_id FK
        bigint hobby_id FK
        int prioritaet
    }

    PHOTO {
        bigint photo_id PK
        bigint user_id FK
        boolean ist_profilbild
        bytea foto_daten
        timestamp erstellt_am
    }

    MESSAGE {
        bigint message_id PK
        bigint conversation_id
        bigint sender_id FK
        bigint receiver_id FK
        text nachrichtentext
        timestamp gesendet_am
    }

    LIKE {
        bigint like_id PK
        bigint user_id FK
        bigint liked_user_id FK
        varchar status
        timestamp timestamp
    }

    FRIENDSHIP {
        bigint user_id_1 FK
        bigint user_id_2 FK
        timestamp bestaetigt_seit
    }

    %% Beziehungen

    USER ||--|{ PHOTO : "hat"
    USER ||--|{ USER_HOBBY : "hat"
    HOBBY ||--|{ USER_HOBBY : "wird verwendet von"
    USER ||--|{ MESSAGE : "sendet (sender_id)"
    USER ||--|{ MESSAGE : "erhält (receiver_id)"
    USER ||--|{ LIKE : "sendet Like"
    USER ||--|{ LIKE : "empfängt Like (liked_user_id)"
    USER }o--o{ USER : "ist befreundet (FRIENDSHIP)" 
